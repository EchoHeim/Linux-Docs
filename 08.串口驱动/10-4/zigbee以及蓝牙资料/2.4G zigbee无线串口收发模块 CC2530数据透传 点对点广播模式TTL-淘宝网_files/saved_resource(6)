KISSY.add("item-recommend/__1",function(a,e,n,t){return function(a,e,n){var i,s="",r=this.config,c=this,d=r.utils;"undefined"!=typeof t&&t.kissy&&(i=t);var l=d.runBlockCommand,o=d.renderOutput,p=d.getProperty,v=(d.runInlineCommand,d.getPropertyOrRunCommand);s+='<!-- \u5fc3\u9009\u81ea\u5b9a\u4e49\u8ba1\u5212\u6a21\u677f -->\n\n<div data-spm="1998246703" class="tad-heart-election tab-heart-defualt">\n    <div style="';var f=v(c,a,{},"style",0,4);s+=o(f,!0),s+='" class="';var u=v(c,a,{},"cls",0,4);s+=o(u,!0),s+='">\n        ';var m={},g=[],h=p(c,a,"data",0,5);return g.push(h),m.params=g,m.fn=function(a){var e="";e+='\n        <div class="wrap">\n            <a href="';var n=v(c,a,{},"link",0,7);e+=o(n,!0),e+='" target="_blank">\n\n                <div class="img-wrap">\n                    <img src="';var t=v(c,a,{},"img",0,10);e+=o(t,!0),e+='" alt="';var i=v(c,a,{},"title",0,10);e+=o(i,!0),e+='">\n                </div>\n\n                <div class="title">\n                    ';var s={},r=[],d=p(c,a,"icons",0,14),f=p(c,a,"icons.iconPcSmall",0,14),u=p(c,a,"icons.iconPcSmall",0,14);r.push(d&&f&&""!==u),s.params=r,s.fn=function(a){var e="";e+='\n                    <img class="icon-promotion" src="';var n=v(c,a,{},"icons.iconPcSmall",0,15);return e+=o(n,!0),e+='">\n                    '},e+=l(c,a,s,"if",14),e+="\n                    <span>";var m=v(c,a,{},"title",0,17);e+=o(m,!0),e+="</span>\n                </div>\n\n                ";var g={},h=[],_=p(c,a,"special",0,20);return h.push("-1"!==_),g.params=h,g.fn=function(a){var e="";e+='\n                <div class="price">\n                    <span class="special">\n                        <span class="yen">&yen;</span>';var n={},t=[],i=p(c,a,"special",0,23);t.push("0.0"===i),n.params=t,n.fn=function(a){var e="";e+="";var n=v(c,a,{},"price",0,23);return e+=o(n,!0),e+=""},n.inverse=function(a){var e="";e+="";var n=v(c,a,{},"special",0,23);return e+=o(n,!0),e+=""},e+=l(c,a,n,"if",23),e+="\n                    </span>\n                    ";var s={},r=[],d=p(c,a,"special",0,25),f=p(c,a,"price",0,25),u=p(c,a,"special",0,25);return r.push(d!==f&&"0.0"!==u),s.params=r,s.fn=function(a){var e="";e+='\n                    <span class="original"><span class="yen">&yen;</span>';var n=v(c,a,{},"price",0,26);return e+=o(n,!0),e+="</span>\n                    "},e+=l(c,a,s,"if",25),e+="\n                </div>\n                "},e+=l(c,a,g,"if",20),e+="\n            </a>\n        </div>\n        "},s+=l(c,a,m,"each",5),s+="\n    </div>\n</div>\n"}}),KISSY.add("item-recommend/__2",function(a,e,n,t){return function(a,e,n){var i,s="",r=this.config,c=this,d=r.utils;"undefined"!=typeof t&&t.kissy&&(i=t);var l=d.runBlockCommand,o=d.renderOutput,p=d.getProperty,v=(d.runInlineCommand,d.getPropertyOrRunCommand);s+='<!-- \u63a8\u8350\u8ba1\u5212\u6a21\u677f -->\n<div data-spm="1998246701" class="tad-heart-election tab-heart-tuijian">\n    <div class="rain-photo g-1-6">\n        ';var f={},u=[],m=p(c,a,"data",0,4);return u.push(m),f.params=u,f.fn=function(a){var e="";e+='\n        <div class="wrap">\n            <a href="';var n=v(c,a,{},"link",0,6);e+=o(n,!0),e+='" target="_blank">\n                <div class="img-wrap">\n                    <img src="';var t=v(c,a,{},"img",0,8);e+=o(t,!0),e+='_170x170.jpg" alt="';var i=v(c,a,{},"title",0,8);e+=o(i,!0),e+='">\n                </div>\n                <div class="title">\n                    ';var s={},r=[],d=p(c,a,"icons",0,11),f=p(c,a,"icons.iconPcSmall",0,11),u=p(c,a,"icons.iconPcSmall",0,11);r.push(d&&f&&""!==u),s.params=r,s.fn=function(a){var e="";e+='\n                    <img class="icon-promotion" src="';var n=v(c,a,{},"icons.iconPcSmall",0,12);return e+=o(n,!0),e+='">\n                    '},e+=l(c,a,s,"if",11),e+="\n                    <span>";var m=v(c,a,{},"title",0,14);e+=o(m,!0),e+="</span>\n                </div>\n\n                ";var g={},h=[],_=p(c,a,"special",0,17);return h.push("-1"!==_),g.params=h,g.fn=function(a){var e="";e+='\n                <div class="price">\n                    <span class="special">\n                        <span class="yen">&yen;</span>';var n={},t=[],i=p(c,a,"special",0,20);t.push("0.0"===i),n.params=t,n.fn=function(a){var e="";e+="";var n=v(c,a,{},"price",0,20);return e+=o(n,!0),e+=""},n.inverse=function(a){var e="";e+="";var n=v(c,a,{},"special",0,20);return e+=o(n,!0),e+=""},e+=l(c,a,n,"if",20),e+="\n                    </span>\n                    ";var s={},r=[],d=p(c,a,"special",0,22),f=p(c,a,"price",0,22),u=p(c,a,"special",0,22);return r.push(d!==f&&"0.0"!==u),s.params=r,s.fn=function(a){var e="";e+='\n                    <span class="original"><span class="yen">&yen;</span>';var n=v(c,a,{},"price",0,23);return e+=o(n,!0),e+="</span>\n                    "},e+=l(c,a,s,"if",22),e+="\n                </div>\n                "},e+=l(c,a,g,"if",17),e+="\n            </a>\n        </div>\n        "},s+=l(c,a,f,"each",4),s+="\n    </div>\n</div>\n"}}),KISSY.add("item-recommend/_1",["node","base","ajax","json","cookie","xtemplate","item-recommend/c/heart-election/index.css","item-recommend/__1","item-recommend/__2"],function(a,e){var n=e("node"),t=e("base"),i=e("ajax"),s=e("json"),r=e("cookie"),c=e("xtemplate");e("item-recommend/c/heart-election/index.css");var d,l=n.all;d={},d.draw='<div data-spm="1998246703" class="tad-heart-election"><div style="{{style}}" class="rain-draw">\n  <div style="{{style}}" class="{{cls}}">\n      {{#each data}}<a target="_blank" style="{{style}}" href="{{link}}" class="mask"><em><s></s></em>\n          {{#if cls!==\'content default\'}}<div class="product-info {{cls}}">\n              <div class="draw-bg"></div>\n              <dl class="rain-left"><dt><img src="{{img}}"></dt>\n                  <dd class="title">{{title}}</dd>\n                  {{#if special!==\'-1\'}}<dd>&yen;<span class="special">{{special}}</span>{{#if special!==price}}<span class="price">{{price}}</span>{{/if}}</dd>{{/if}}\n              </dl>\n          </div>{{/if}}\n      </a>{{/each}}\n  </div>\n</div></div>',d.recom='<div data-spm="1998246703" class="tad-heart-election"><div style="{{style}}" class="{{cls}}">\n  <ul class="rain-left">\n    {{#each data}}<li class="{{cls}}">\n        <a href="{{link}}" target="_blank">\n            <img src="{{img}}" alt="">\n            <div class="rain-product-info">\n              {{#if special!==-1}}<div class="special">&yen;{{special}}{{#if special!==price}}<span class="price">{{price}}</span>{{/if}}</div>{{/if}}\n              <div class="title">{{title}}</div>\n        </div></a></li>{{/each}}\n  </ul>\n</div></div>',d.swaps='<div data-spm="1998246703" class="tad-heart-election"><h3>\u8de8\u5e97\u63a8\u8350<span><em>\u4eb2\uff0c\u4ee5\u4e0b\u63a8\u8350\u7684\u5b9d\u8d1d\u5747\u4e3a\u5176\u5b83\u5e97\u94fa\u7684\u5b9d\u8d1d\uff0c\u5982\u679c\u559c\u6b22\uff0c\u53ef\u4ee5\u70b9\u51fb\u5230\u76f8\u5e94\u7684\u5e97\u94fa\u5411\u638c\u67dc\u54a8\u8be2\u8d2d\u4e70\u54e6\uff01</em></span></h3>\n<div class="rain-photo g-1-6">\n      {{#each data}}<div class="wrap">\n        <a href="{{link}}" target="_blank">\n          <img src="{{img}}_170x170.jpg" alt="">\n          <div class="rain-product-info">\n            {{#if special!==\'-1\'}}<div class="special">&yen;{{special}}{{#if special!==price}}<span class="price">{{price}}</span>{{/if}}</div>{{/if}}\n            <div class="title">{{title}}</div>\n          </div>\n        </a>\n      </div>{{/each}}\n    </div></div>',d.photo=e("item-recommend/__1"),d.recommend=e("item-recommend/__2");var o=!!~location.href.indexOf("daily"),p=!1,v=!1,f=o?"//tad.daily.taobao.net":"//tad.taobao.com",u=o?"//tui.taobao.com/recommend?sellerid=737329&itemid=18813881279&buyerid=392063273&catid=50005818&cna=HbuVDIAPMg4CASp4Ss%20W2ffQ&areaid=tad_first_area&_ksTS=1414137448224_804&callback=jsonp805&appid=152":"//tui.taobao.com/recommend?appid=152",m=t.extend({init:function(){var a=this,e=a.get("data");e?a.render():a.load(),a.bindEvent()},render:function(){var a,e,n,t,i,r,o,f,u,m,g=this,h=g.get("data"),_=[],y=g.get("container"),b=g.get("errorFn"),w=g.get("successFn");if(h.guide)return g_config&&g_config.sellerDetail&&g_config.sellerDetail.buyerDetail?void l("#tad_first_area").hide():(location.host&&location.host.indexOf("daily")>-1?l(y).html('<div class="tad_guide_area" data-spm="1998223148"><div class="tad_guide_info"></div><div class="tad_guide_ope"><a href="//tte.daily.taobao.net/activity/default" target="_blank" class="tad_now_setbtn">\u7acb\u5373\u8bbe\u7f6e</a><a href="//bbs.taobao.com/catalog/thread/16029511-270773839.htm?scm=1212.30.1.31" target="_blank" class="tad_help_link">\u5e2e\u52a9</a></div></div>'):l(y).html('<div class="tad_guide_area" data-spm="1998223148"><div class="tad_guide_info"></div><div class="tad_guide_ope"><a href="//xin.taobao.com/activity/default" target="_blank" class="tad_now_setbtn">\u7acb\u5373\u8bbe\u7f6e</a><a href="//bbs.taobao.com/catalog/thread/16029511-270773839.htm?scm=1212.30.1.31" target="_blank" class="tad_help_link">\u5e2e\u52a9</a></div></div>'),void(w&&w()));for(e in h)if("guide"!==e&&"tad_12"!==e&&"xin1212"!==e){var k=h[e],I=l("#"+e);if(k[0])if(k[0].redirect)_.push(e),v=!0;else if(k[0].success&&""!=k[0].content){for(p=!0,t="",r=0,f=k.length;f>r;r++)if(a="string"==typeof k[r].content?s.parse(k[r].content):k[r].content){for(i=d[a.name],a.style=g.getStyle(a.style),m=a.data,o=0,u=m.length;u>o;o++)n=m[o],n.style&&(n.style=g.getStyle(n.style));t+=new c(i).render(a)}t.length>0&&a.data.length>0&&("tad_first_area"==e&&(I=l(y)||I),I.html(t),I.attr({taskid:a.taskID,templatetype:a.name,whichplan:"custom"}),I.show(),w&&w())}else"tad_first_area"==e&&b&&b()}v&&g.renderRedirect(_)},bindEvent:function(){var a=this;a.resize(),l(window).on("resize",function(){a.resize()})},resize:function(){l("#tad_first_area").parent().width()>990?l("#J_TadHeartElection").length&&l("#J_TadHeartElection").removeClass("tad_small_width"):l("#J_TadHeartElection").length&&l("#J_TadHeartElection").addClass("tad_small_width")},load:function(){var a=this,e=a.get("args"),n={},t=a.get("errorFn");a.get("successFn");n.sellerid=e.sellerId,n.buyerid=e.userId,n.appid=1,n.itemid=e.objectId,n.catid=e.catid,n.cna=e.cna,n.areaid="tad_first_area",g_config&&g_config.sellerDetail&&g_config.sellerDetail.show&&(n.self=1);var s=f+"/api/list";return new i({url:s,type:"get",dataType:"jsonp",data:n,timeout:3e3,error:function(){t&&t()},jsonp:"callback",success:function(e){return e?(a.set("data",e),void a.render()):void(t&&t())}})},renderRedirect:function(a){var e=this,n=e.get("args"),t={},s=e.get("container"),r=e.get("errorFn"),p=e.get("successFn");return t.sellerid=n.sellerId,t.itemid=n.objectId,t.buyerid=n.userId,t.catid=n.catid,t.cna=n.cna,t.areaid=n.targetId.toString(),o&&(t={}),new i({url:u,type:"get",data:t,dataType:"jsonp",timeout:3e3,jsonp:"callback",error:function(){r&&r()},success:function(e){if(!e)return void(r&&r());if(e&&!e.result)return void(r&&r());if(e&&e.result&&0==e.result.length)return void(r&&r());for(var n=0;n<a.length;n++){var t=a[n],i=l("#"+t);if(!e)return void(r&&r());var o="",v=e.result[0][t];if(v.success&&0!=v.data.length){var f={caption:v.caption,data:v.data},u=d.recommend;if(o+=new c(u).render(f),"tad_first_area"==t&&(i=l(s)||i),i.html(o),i.attr({whichplan:"default"}),i.show(),p&&p(),"tad_second_area"===t){var m="//log.mmstat.com/shopflow.4?&t="+(new Date).getTime(),g=new Image;g.src=m}}else"tad_first_area"==t&&r&&r()}}})},getStyle:function(a){var e,n,t,i,s;if(!a)return"";i="";for(n in a)s=a[n],t=n.match(/[A-Z]/),t&&t.length>0&&(e=t[0],n=n.replace(e,"-"+e.toLowerCase())),i+=n+":"+s+";";return i}},{ATTRS:{args:{valueFn:function(){var a={};return a.targetId=["tad_first_area"],g_config.vdata&&g_config.vdata.viewer&&g_config.vdata.viewer.id?a.userId=g_config.vdata.viewer.id:a.userId=r.get("cna"),a.cna=r.get("cna"),a.objectId=g_config.itemId,a.sellerId=g_config.sellerId,a.shopId=g_config.shopId,a.catid=g_config.idata.item.cid,a}},data:{value:""},container:{value:""},successFn:{valueFn:function(){}},errorFn:{valueFn:function(){}}}});return m});