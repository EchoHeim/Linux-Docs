KISSY.add("tbc/header/1.4.8/container/container-xtpl",function(e,t,n,r){return function(e,t,n){var a,i="",s=this.config,o=s.utils;"undefined"!=typeof r&&r.kissy&&(a=r);o.runBlockCommand,o.renderOutput,o.getProperty,o.runInlineCommand,o.getPropertyOrRunCommand;return i+='<div class="tb-header" role="banner">\n<div class="tb-header-content">\n</div>\n</div>'}}),KISSY.add("tbc/header/1.4.8/market/market-xtpl",function(e,t,n,r){return function(e,t,n){var a,i="",s=this.config,o=s.utils;"undefined"!=typeof r&&r.kissy&&(a=r);o.runBlockCommand,o.renderOutput,o.getProperty,o.runInlineCommand,o.getPropertyOrRunCommand;return i+='<div id="J_Market" class="tb-header-market" role="dialog">\n    <a href="javascript:" class="tb-header-market-hd">\u66f4\u591a\u5e02\u573a<i class="tb-header-market-icon"><em></em><span></span></i></a>\n    <div class="tb-header-market-bd"></div>\n</div>'}}),KISSY.add("tbc/header/1.4.8/market/market-hover-xtpl",function(e,t,n,r){return function(e,t,n){var a,i="",s=this.config,o=this,c=s.utils;"undefined"!=typeof r&&r.kissy&&(a=r);var u=c.runBlockCommand,d=c.renderOutput,l=c.getProperty;c.runInlineCommand,c.getPropertyOrRunCommand;i+="";var h={},m=[],p=l(o,e,"data",0,1);return m.push(p),h.params=m,h.fn=function(e){var t="";t+="\n";var n={},r=[],a=l(o,e,"data",0,2);return r.push(a),n.params=r,n.fn=function(e){var t="";t+='\n<dl>\n    <dt><a href="';var n=l(o,e,"this.href",0,4);t+=d(n,!0),t+='" target="_blank">';var r=l(o,e,"this.text",0,4);t+=d(r,!0),t+="</a></dt>\n    ";var a={},i=[],s=l(o,e,"this.subMarkets",0,5);return i.push(s),a.params=i,a.fn=function(e){var t="";t+='\n    <dd><a href="';var n=l(o,e,"this.href",0,6);t+=d(n,!0),t+='" target="_blank">';var r=l(o,e,"this.text",0,6);return t+=d(r,!0),t+="</a></dd>\n    "},t+=u(o,e,a,"each",5),t+="\n</dl>\n"},t+=u(o,e,n,"each",2),t+="\n"},h.inverse=function(e){var t="";return t+="\n    <div>\u7f51\u7edc\u5f02\u5e38</div>\n"},i+=u(o,e,h,"if",1),i+="\n"}}),KISSY.add("tbc/header/1.4.8/events",function(e){return{emitter:e.all("body"),HEADER_MARKET_HOVER:"header:market:hover",HEADER_SEARCH_SHOP:"header:search:shop",HEADER_SEARCH_TB:"header:search:tb"}}),KISSY.add("tbc/header/1.4.8/market/market",["node","base","xtemplate","io","./market-xtpl","./market-hover-xtpl","../events"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=t("io"),s=t("./market-xtpl"),o=t("./market-hover-xtpl"),c=t("../events"),u=c.emitter,d=n.all,l="tb-header-hover",h="mouseenter",m="mouseleave",p=300,f=null,g=null,v=r.extend({initializer:function(){},render:function(e){var t=new a(s),n=t.render(),r=d(n);this.set("el",r),e=e||this.get("render"),e.append(r)},renderHover:function(e,t){function n(n){var i=new a(o),s=i.render({data:n});e.css({background:"#fff",height:"auto"}),e.html(s);var c=e.height()+16;r.height=c,e.css({height:0}),t(c)}var r=this;if(this.get("rendered"))t(r.height);else{this.set("rendered",!0);new i({url:"//www.taobao.com/go/rgn/vertical/jsonp.php",data:{},jsonp:"cb",dataType:"jsonp",success:function(e,t,r){n(e)},error:function(e,t,r){n(e)}})}},bind:function(){var e=this,t=this.$el,n=d(".tb-header-market-bd",t);t.on([h,m].join(" "),function(r){g&&g.stop(),r.type==h?f=setTimeout(function(){t.addClass(l),u.fire(c.HEADER_MARKET_HOVER),e.renderHover(n,function(e){g=n.animate({height:e},{duration:.5,easing:"backOut"}),f=null})},p):f?(clearTimeout(f),t.removeClass(l)):g=n.animate({height:0},{duration:.3,easing:"backIn",complete:function(){t.removeClass(l)}})})}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},render:{}}});return v}),KISSY.add("tbc/header/1.4.8/search/search-xtpl",function(e,t,n,r){return function(e,t,n){var a,i="",s=this.config,o=this,c=s.utils;"undefined"!=typeof r&&r.kissy&&(a=r);var u=c.runBlockCommand,d=c.renderOutput,l=c.getProperty,h=(c.runInlineCommand,c.getPropertyOrRunCommand);i+='<div class="J_Search tb-header-search search ';var m=h(o,e,{},"elCls",0,1);i+=d(m,!0),i+='" role="search">\n    <div class="search-panel">\n        <form target="_top" action="';var p=h(o,e,{},"primaryAction",0,3);i+=d(p,!0),i+='" name="search" class="J_SearchForm">\n            <div class="search-buttons">\n                <button class="J_PrimarySearch search-button primary" type="submit">';var f=h(o,e,{},"primaryButton",0,5);i+=d(f,!0),i+="</button>\n                ";var g={},v=[],b=l(o,e,"secondaryShow",0,6);return v.push(b),g.params=v,g.fn=function(e){var t="";t+='\n                <button class="J_SecondarySearch search-button secondary" type="submit" data-action="';var n=h(o,e,{},"secondaryAction",0,7);t+=d(n,!0),t+='">\n                    ';var r=h(o,e,{},"secondaryButton",0,8);return t+=d(r,!0),t+="\n                </button>\n                "},i+=u(o,e,g,"if",6),i+='\n            </div>\n            <div class="search-panel-fields">\n                <input class="J_Suggest" name="q" accesskey="s" autocomplete="off">\n            </div>\n            <input type="hidden" value="newHeader" name="s_from">\n            <input type="hidden" name="ssid" value="s5-e">\n            <input type="hidden" name="search_type" value="item">\n            <input type="hidden" name="sourceId" value="tb.item">\n        </form>\n    </div>\n</div>'}}),KISSY.add("tbc/header/1.4.8/search/search",["node","base","xtemplate","../events","./search-xtpl","tbc/search-suggest/1.4.5/new_suggest.css","tbc/search-suggest/1.4.5/index","tbc/search-suggest/1.4.5/plugin/history"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=n.all,s=t("../events"),o=t("./search-xtpl"),c=s.emitter,u=r.extend({initializer:function(){},render:function(e){var t=new a(o).render({primaryAction:this.get("primaryAction"),primaryButton:this.get("primaryButton"),secondaryAction:this.get("secondaryAction"),secondaryButton:this.get("secondaryButton"),secondaryShow:this.get("secondaryShow"),elCls:this.get("elCls")}),n=i(t);this.set("el",n),e=e||this.get("render"),e.append(n)},bind:function(){t("tbc/search-suggest/1.4.5/new_suggest.css");var e=t("tbc/search-suggest/1.4.5/index"),n=t("tbc/search-suggest/1.4.5/plugin/history"),r=this.$el,a=(new e({plugins:[new n],sugConfig:{sourceUrl:"//suggest.taobao.com/sug?k=1&area=c2c",node:i(".J_Suggest",r),focused:!1,resultFormat:""},mods:{sort:["history","list"]}}),i(".J_SecondarySearch",r));a.on("click",function(){c.fire(s.HEADER_SEARCH_SHOP);var e=a.attr("data-action");e&&i(".J_SearchForm",r).attr("action",e)});var o=i(".J_PrimarySearch",r);o.on("click",function(){c.fire(s.HEADER_SEARCH_TB)})}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},render:{},elCls:{value:""},primaryAction:{value:"//s.taobao.com/search"},primaryButton:{value:"\u641c\u6dd8\u5b9d"},secondaryAction:{value:""},secondaryButton:{value:"\u641c\u672c\u5e97"},secondaryShow:{value:!0}}});return u}),KISSY.add("tbc/header/1.4.8/logo/logo-xtpl",function(e,t,n,r){return function(e,t,n){var a,i="",s=this.config,o=this,c=s.utils;"undefined"!=typeof r&&r.kissy&&(a=r);var u=(c.runBlockCommand,c.renderOutput),d=(c.getProperty,c.runInlineCommand,c.getPropertyOrRunCommand);i+='<div class="tb-header-logo">\n    <a href="';var l=d(o,e,{},"href",0,2);i+=u(l,!0),i+='" target="_blank" title="';var h=d(o,e,{},"title",0,2);i+=u(h,!0),i+='">\n        <img height="38" alt="\u6dd8\u5b9d\u7f51logo" src="';var m=d(o,e,{},"src",0,3);return i+=u(m,!0),i+='">\n    </a>\n</div>'}}),KISSY.add("tbc/header/1.4.8/logo/logo",["node","base","xtemplate","./logo-xtpl","../events"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=t("./logo-xtpl"),s=t("../events"),o=(s.emitter,n.all),c=e.isArray,u=r.extend({initializer:function(){},render:function(e){var t=new a(i),n=window.devicePixelRatio>1,r=this.get("src");c(r)&&(r=(n?r[1]:r[0])||r[0]);var s=t.render({href:this.get("href"),src:r,title:this.get("title")}),u=o(s);this.set("el",u),e=e||this.get("render"),e.append(u)}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},render:{},title:{value:"\u6dd8\u5b9d\u7f51"},src:{value:"//gtms01.alicdn.com/tps/i1/T1Kz0pXzJdXXXIdnjb-146-58.png"},href:{value:"//www.taobao.com"}}});return u}),KISSY.add("tbc/header/1.4.8/nav/nav-xtpl",function(e,t,n,r){return function(e,t,n){var a,i="",s=this.config,o=this,c=s.utils;"undefined"!=typeof r&&r.kissy&&(a=r);var u=c.runBlockCommand,d=c.renderOutput,l=c.getProperty;c.runInlineCommand,c.getPropertyOrRunCommand;i+='<div class="tb-header-nav">\n    <ul>\n        ';var h={},m=[],p=l(o,e,"items",0,3);return m.push(p),h.params=m,h.fn=function(e){var t="";t+='\n        <li class="tb-header-nav-item"><a target="_blank" href="';var n=l(o,e,"this.href",0,4);t+=d(n,!0),t+='">';var r=l(o,e,"this.text",0,4);return t+=d(r,!0),t+="</a></li>\n        "},i+=u(o,e,h,"each",3),i+="\n    </ul>\n</div>"}}),KISSY.add("tbc/header/1.4.8/nav/nav",["node","base","xtemplate","./nav-xtpl","../events"],function(e,t){var n=t("node"),r=t("base"),a=t("xtemplate"),i=t("./nav-xtpl"),s=t("../events"),o=(s.emitter,n.all),c=r.extend({initializer:function(){},render:function(e){var t=new a(i),n=t.render({items:this.get("items")}),r=o(n);this.set("el",r),e=e||this.get("render"),e.append(r)}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},items:{}}});return c}),KISSY.add("tbc/header/1.4.8/types",["./market/market","./search/search","./logo/logo","./nav/nav"],function(e,t){var n=t("./market/market"),r=t("./search/search"),a=t("./logo/logo"),i=t("./nav/nav"),s={getDefaultLogo:function(){return new a},getDefaultSearch:function(e){return new r({secondaryShow:Number(e.id),secondaryAction:e.url+"search.htm"})},getDefaultMarket:function(){return new n}},o={"default":function(e){var t=[];return t.push(s.getDefaultLogo(),s.getDefaultMarket(),s.getDefaultSearch(e)),t},global:function(e){var t=[],n=new a({src:"//gtms03.alicdn.com/tps/i3/TB1J.3PFVXXXXcwXFXXjlPJMXXX-314-45.png",href:"//g.taobao.com",title:"\u8db3\u4e0d\u51fa\u6237\uff0c\u6dd8\u904d\u5168\u7403"}),s=new i({items:[]}),o=new r({elCls:"global",primaryButton:"\u641c\u5168\u7403\u8d2d",primaryAction:"//g.taobao.com/brand_detail.htm",secondaryButton:"\u641c\u6dd8\u5b9d",secondaryAction:"//s.taobao.com/search"});return t.push(n,s,o),t},xiami:function(e){var t=[],n=new a({src:"//img.xiami.net/static/taonei/musichall/images/mh-logo.png",href:"//music.taobao.com/"}),i=s.getDefaultMarket(),o=new r({primaryButton:"\u641c\u7d22",primaryAction:"//music.taobao.com/market/music/list.php?_input_charset=utf-8",secondaryShow:Number(e.id),secondaryAction:e.url+"search.htm"});return t.push(n,i,o),t},tiaoshi:function(e){var t=[],n=new a({src:"//gtms02.alicdn.com/tps/i2/TB1lgaLGVXXXXcCXpXXAHEkKpXX-255-76.png",href:"//tiaoshi.taobao.com/"}),i=new r({elCls:"tiaoshi",primaryButton:"\u641c\u98df\u54c1",primaryAction:"//chi.taobao.com/itemlist/huichi2014.htm?style=grid&_input_charset=utf-8&cat=50002766,50035978,50008825,50042258,50103282,50103280,50106154,50108542",primaryParams:{style:"grid",_input_charset:"utf-8",cat:"50002766,50035978,50008825,50042258,50103282,50103280,50106154,50108542"},secondaryButton:"\u641c\u6dd8\u5b9d",secondaryAction:"//s.taobao.com/search"});return t.push(n,i),t},star:function(e){var t=[],n=new a({src:"//gtms01.alicdn.com/tps/i3/T1wWXuFbBbXXXFH6je-160-64.png",href:"//star.taobao.com"});return t.push(n,s.getDefaultMarket(),s.getDefaultSearch(e)),t},jiyoujia:function(e){var t=[],n=new a({src:"//img.alicdn.com/tps/i2/TB1fI7bHXXXXXc0XVXXlK5nGFXX-162-42.png",href:"//www.jiyoujia.com"});return t.push(n,s.getDefaultMarket(),s.getDefaultSearch(e)),t},zhizao:function(e){var t=[],n=new a({src:["//gtms04.alicdn.com/tps/i4/TB1PhM_IpXXXXblapXXoyKmGFXX-162-36.png","//gtms03.alicdn.com/tps/i3/TB1n0k3IFXXXXXEXpXXkrBqMVXX-324-72.png"],href:"//q.taobao.com"});return t.push(n,s.getDefaultMarket(),s.getDefaultSearch(e)),t}};return{types:o,item:s,getItems:function(e){var t=e.type,n=e.shop,r=e.seller,a=e.item;return(o[t]||o["default"])(n,a,r)}}}),KISSY.add("tbc/header/1.4.8/index",["./index.css","base","node","./container/container-xtpl","./types","xtemplate"],function(e,t){t("./index.css");var n=t("base"),r=t("node"),a=t("./container/container-xtpl"),i=t("./types"),s=t("xtemplate"),o=r.all,c=n.extend({initializer:function(){this.render()},render:function(){if(!this.get("rendered")){var t=i.getItems({type:this.get("type"),item:this.get("item")||{},shop:this.get("shop")||{},seller:this.get("seller")||{}});this.set("rendered",!0);var n=new s(a),r=n.render(),c=o(r);this.set("el",c);var u=o(".tb-header-content",c);e.each(t,function(e){e.render&&e.render(u)});var d=o(this.get("renderTo"));d.append(c),e.each(t,function(e){e.bind&&e.bind()})}}},{ATTRS:{el:{setter:function(e){this.$el=e,this.el=e[0]}},renderTo:{}}});return c});