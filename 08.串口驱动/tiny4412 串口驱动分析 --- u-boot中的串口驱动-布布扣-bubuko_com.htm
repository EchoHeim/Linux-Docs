<!DOCTYPE HTML>
<!-- saved from url=(0044)http://www.bubuko.com/infodetail-661032.html -->
<!DOCTYPE html PUBLIC "" ""><HTML lang="zh-cn"><HEAD id="Head1"><META 
content="IE=11.0000" http-equiv="X-UA-Compatible">

<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="keywords" content="布布扣,bubuko.com,互联网,软件开发,开源,电脑硬件,asp,asp.net,Windows,数据库,HTML,JS,CSS,技术文章,游戏,创业,手机相关,android,apple,jsp,php">
<META name="baidu_union_verify" content="93e2563fa6214cee82f7d045b7c6c845"> 
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/uaredirect.js" type="text/javascript"></SCRIPT>
 
<SCRIPT type="text/javascript">    uaredirect("http://siteapp.baidu.com/webapp/www.bubuko.com", "http://www.bubuko.com");</SCRIPT>
 
<META name="baidu-site-verification" content="iVK91ZlEcG">
<META name="description" content="作者：彭东林邮箱：pengdonglin137@163.com开发板：tiny4412ADK+S700 4GB Flash主机：Wind7 64位虚拟机：Vmware+Ubuntu12_04u-boot：U-Boot 2010.12Linux内核版本：linux-3.0.31Android版本：an..."><TITLE>
	tiny4412 串口驱动分析 --- u-boot中的串口驱动-布布扣-bubuko.com </TITLE><LINK href="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/style.css" 
rel="stylesheet" type="text/css"> 
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/jquery-1.8.3.min.js" type="text/javascript" charset="utf-8"></SCRIPT>
<LINK href="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/prettify.css" 
rel="stylesheet" type="text/css">     
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/prettify.js" type="text/javascript" charset="utf-8"></SCRIPT>
 
<META name="GENERATOR" content="MSHTML 11.00.9600.18315"></HEAD> 
<BODY>
<DIV class="width100bi height23px divbackgroundcolor divborderbottomsolid1">
<DIV class="width1000px divmargin0auto">
<DIV class="divfloatleft menuDivt">
<UL>
  <LI><A class="colorhei" href="http://www.bubuko.com/">[首页]</A></LI>
  <LI><A class="colorhei" href="http://www.bubuko.com/news/">[新闻]</A></LI>
  <LI class="backgroundcolorbai"><A class="colorhei" href="http://www.bubuko.com/info.html">[文章]</A></LI></UL></DIV>
<DIV class="divfloatright">
<DIV class="paddingtop3" id="logintopdescription"></DIV></DIV></DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV class="width1000px divmargin0auto paddingtop10bottom10">
<DIV class="width120px divfloatleft paddingtop10"><A title="布布扣，bubuko.com" id="logo" 
href="http://www.bubuko.com/"><IMG width="92" height="60" alt="布布扣，bubuko.com" 
src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/logo.png" 
border="0">         </A>     </DIV>
<DIV class="width880px divfloatright">
<DIV class="menuDiv">
<UL>
  <LI class="bottomline width5px">&nbsp;</LI>
  <LI class="title0" id="infohtml"><A title="文章首页" href="http://www.bubuko.com/info.html">首页</A></LI>
  <LI class="title1" id="infolist-2"><A title="Web开发" href="http://www.bubuko.com/infolist-2-1.html">Web开发</A></LI>
  <LI class="title1" id="infolist-3"><A title="Windows开发" href="http://www.bubuko.com/infolist-3-1.html">Windows开发</A></LI>
  <LI class="title1" id="infolist-4"><A title="编程语言" href="http://www.bubuko.com/infolist-4-1.html">编程语言</A></LI>
  <LI class="title1" id="infolist-5"><A title="数据库技术" href="http://www.bubuko.com/infolist-5-1.html">数据库技术</A></LI>
  <LI class="title1" id="infolist-6"><A title="移动平台" href="http://www.bubuko.com/infolist-6-1.html">移动平台</A></LI>
  <LI class="title1" id="infolist-8"><A title="系统服务" href="http://www.bubuko.com/infolist-8-1.html">系统服务</A></LI>
  <LI class="title1" id="infolist-9"><A title="微信" href="http://www.bubuko.com/infolist-9-1.html">微信</A></LI>
  <LI class="title1" id="infolist-13"><A title="设计" href="http://www.bubuko.com/infolist-13-1.html">设计</A></LI>
  <LI class="title1" id="infolist-7"><A title="布布扣" href="http://www.bubuko.com/infolist-7-1.html">布布扣</A></LI>
  <LI class="title1" id="infolist-11"><A title="其他" href="http://www.bubuko.com/infolist-11-1.html">其他</A></LI>
  <LI class="title1" id="infolist-12"><A title="数据分析" href="http://www.bubuko.com/analysis.html">数据分析</A></LI>
  <LI class="bottomline width5px">&nbsp;</LI></UL></DIV></DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV class="divdaohang">
<DIV class="divtitlefont"><A title="文章首页" 
href="http://www.bubuko.com/info.html">首页</A>             <SPAN 
id="lbltitle">&gt; <A href="http://www.bubuko.com/infolist-11-1.html">其他</A> 
&gt; 详细</SPAN>         </DIV></DIV>
<DIV class="divmain">
<DIV class="width70bi divfloatleft">
<DIV class="marginright20">
<DIV class="divtextaligncenter">
<SCRIPT type="text/javascript">
        var cpro_id = "u2385951";
        (window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id] = { at: "3", rsi0: "680", rsi1: "250", pat: "6", tn: "baiduCustNativeAD", rss1: "#FFFFFF", conBW: "1", adp: "1", ptt: "0", titFF: "%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91", titFS: "14", rss2: "#000000", titSU: "0", ptbg: "90", piw: "0", pih: "0", ptp: "0" }
    </SCRIPT>
     
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/c.js" type="text/javascript"></SCRIPT>
 </DIV>
<DIV class="detailtitle divtextaligncenter divborderbottomdotted">
<H1 class="detailtitle" id="Htitle">tiny4412 串口驱动分析 --- u-boot中的串口驱动</H1></DIV>
<DIV class="detail1 divtextaligncenter">                    时间：<SPAN class="colorlv" 
id="Label2">2015-03-07 21:08:09</SPAN>                    
&nbsp;&nbsp;&nbsp;&nbsp;  阅读：<SPAN class="colorCheng" id="Label1">1167</SPAN>    
                &nbsp;&nbsp;&nbsp;&nbsp;  评论：<SPAN class="colorCheng" id="lblcommentcount">0</SPAN> 
                   &nbsp;&nbsp;&nbsp;&nbsp;  收藏：<SPAN class="colorCheng" id="lblfavorite">0</SPAN> 
                   &nbsp;&nbsp;&nbsp;&nbsp;  <A class="acursorpointer" id="infofavorite">[点我收藏+]</A> 
                </DIV>
<DIV class="detailcontennt"><SPAN id="Label3">
<P>标签：<A title="android" 
href="http://www.bubuko.com/so/1/android">android</A>&nbsp;&nbsp;&nbsp;<A title="class" 
href="http://www.bubuko.com/so/1/class">class</A>&nbsp;&nbsp;&nbsp;<A title="style" 
href="http://www.bubuko.com/so/1/style">style</A>&nbsp;&nbsp;&nbsp;<A title="代码" 
href="http://www.bubuko.com/so/1/%e4%bb%a3%e7%a0%81">代码</A>&nbsp;&nbsp;&nbsp;<A 
title="com" href="http://www.bubuko.com/so/1/com">com</A>&nbsp;&nbsp;&nbsp;<A 
title="log" href="http://www.bubuko.com/so/1/log">log</A>&nbsp;&nbsp;&nbsp;<A 
title="使用" 
href="http://www.bubuko.com/so/1/%e4%bd%bf%e7%94%a8">使用</A>&nbsp;&nbsp;&nbsp;<A 
title="src" href="http://www.bubuko.com/so/1/src">src</A>&nbsp;&nbsp;&nbsp;<A 
title="http" 
href="http://www.bubuko.com/so/1/http">http</A>&nbsp;&nbsp;&nbsp;</P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">作者：彭东林</SPAN></P>
<P><SPAN style="font-family: courier new,courier; font-size: 18px;">邮箱：<A href="http://www.bubuko.com/cdn-cgi/l/email-protection#7e0e1b10191a1110191217104f4d493e4f484d501d1113"><SPAN 
class="__cf_email__" data-cfemail="0a7a6f646d6e65646d6663643b393d4a3b3c3924696567">[email&nbsp;protected]</SPAN>
<SCRIPT type="text/javascript" data-cfhash="f9e31">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</SCRIPT>
</A></SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">&nbsp;</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">开发板：tiny4412ADK+S700 
4GB Flash</SPAN></P>
<P><SPAN style="font-family: courier new,courier; font-size: 18px;">主机：Wind7 
64位</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">虚拟机：Vmware+Ubuntu12_04</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">u-boot：U-Boot 
2010.12</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">Linux内核版本：linux-3.0.31</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">Android版本：android-4.1.2</SPAN></P>
<P>&nbsp;</P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">我们以tiny4412为例分析串口驱动，下面我们从u-boot开始分析，然后再分析到Linux。</SPAN></P>
<H1><SPAN 
style="font-family: courier new,courier; font-size: 18px;">串口初始化</SPAN></H1>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">关于这部分代码流程参考件：<A href="http://pan.baidu.com/s/1sjlvzpN" 
target="_blank">tiny4412 u-boot 启动.pdf</A>，这里主要分析函数：uart_asm_init</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">在初始化串口驱动之前已经进行了系统时钟以及内存的初始化。下面的代码取自board/samsung/tiny4412/lowlevel_init.S：</SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 128, 128);">lowlevel_init:</SPAN><SPAN style="color: rgb(0, 0, 0);">

          ……

         /* init system clock */

         bl      system_clock_init

         /* Memory initialize */

         bl      mem_ctrl_asm_init

         /* init uart for debug */

         bl      uart_asm_init</SPAN></PRE></DIV>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">通过函数system_clock_init，得到如下结果：</SPAN></P>
<P><SPAN style="font-family: courier new,courier; font-size: 18px;">APLL = 
1400MHz, MPLL = 800MHz</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">通过函数uart_asm_init，将uart的波特率设置为了115200bps，下面是uart_asm_init的实现：</SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 0);">/*

 * </SPAN><SPAN style="color: rgb(0, 128, 128);">uart_asm_init:</SPAN> Initialize UART <SPAN style="color: rgb(0, 0, 255);">in</SPAN><SPAN style="color: rgb(0, 0, 0);"> asm mode, 115200bps fixed.

 * void uart_asm_init(void)

 */

         .globl uart_asm_init

</SPAN><SPAN style="color: rgb(0, 128, 128);">uart_asm_init:</SPAN><SPAN style="color: rgb(0, 0, 0);">

         /* set GPIO to enable UART */

         @ GPIO setting for UART for UART0/</SPAN><SPAN style="color: rgb(128, 0, 128);">1</SPAN>/<SPAN style="color: rgb(128, 0, 128);">2</SPAN>/<SPAN style="color: rgb(128, 0, 128);">3</SPAN><SPAN style="color: rgb(0, 0, 0);">

         ldr    r0, =0x11400000
         ldr    r1, =0x22222222
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0]
         ldr    r0, =0x11400020
         ldr    r1, =0x222222
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0]

// tiny4412有4组uart

 <IMG alt="技术分享" src="">

// 设置uart0~4的时钟源为SCLKMPLL_USER_T，为800MHz
         ldr    r0, =S5PV310_CLOCK_BASE
         ldr    r1, =CLK_SRC_PERIL0_VAL
         ldr    r2, =CLK_SRC_PERIL0_OFFSET
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, r2]

// 设置uart的分频系数为7，经计算得到SCLK UART=800M/(</SPAN><SPAN style="color: rgb(128, 0, 128);">7</SPAN>+<SPAN style="color: rgb(128, 0, 128);">1</SPAN><SPAN style="color: rgb(0, 0, 0);">)=100M

         ldr    r1, =CLK_DIV_PERIL0_VAL
         ldr    r2, =CLK_DIV_PERIL0_OFFSET
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, r2]

// 在tiny4412.h中定义了CONFIG_SERIAL0，即使用uart0作为默认的串口输出，所以S5PV310_UART_CONSOLE_BASE的值就是uart0控制器的基地址，为0x13800000，设置这个寄存的目的是启动并设置uart的FIFO功能，结果：启动uart0的FIFO功能，uart0的Rx FIFO Trigger Level是64B，Tx FIFO Trigger Level是32B

         ldr    r0, =S5PV310_UART_CONSOLE_BASE
         ldr    r1, =0x111
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, #UFCON_OFFSET]

// 设置uart0发送或者接受数据包每帧大小，这里设置为了8bit，1bit停止位，无奇偶校验，normal mode（除此之外还有一种叫做info-red的模式，用于红外发送和接受）

         </SPAN><SPAN style="color: rgb(0, 0, 255);">mov</SPAN><SPAN style="color: rgb(0, 0, 0);"> r1, #0x3
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, #ULCON_OFFSET]

// 设置uart0的读取接收缓冲区和写输出缓冲区的方式为中断或者轮询(除此之外还有DMA方式等)；中断触发类型为电平触发

         ldr    r1, =0x3c5
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, #UCON_OFFSET]

/* SCLK_UART0=100MHz, 波特率设置为115200

* </SPAN><SPAN style="color: rgb(0, 128, 128);">寄存器的值如下计算:</SPAN><SPAN style="color: rgb(0, 0, 0);">

* DIV_VAL = </SPAN><SPAN style="color: rgb(128, 0, 128);">100</SPAN>,<SPAN style="color: rgb(128, 0, 128);">000</SPAN>,<SPAN style="color: rgb(128, 0, 128);">000</SPAN> / (<SPAN style="color: rgb(128, 0, 128);">115200</SPAN> * <SPAN style="color: rgb(128, 0, 128);">16</SPAN>) - <SPAN style="color: rgb(128, 0, 128);">1</SPAN> = <SPAN style="color: rgb(128, 0, 128);">53</SPAN>.<SPAN style="color: rgb(128, 0, 128);">25</SPAN><SPAN style="color: rgb(0, 0, 0);">

* UBRDIVn0 = 整数部分 = </SPAN><SPAN style="color: rgb(128, 0, 128);">53</SPAN><SPAN style="color: rgb(0, 0, 0);">

* UFRACVAL0 = 小数部分 x </SPAN><SPAN style="color: rgb(128, 0, 128);">16</SPAN> = <SPAN style="color: rgb(128, 0, 128);">0</SPAN>.<SPAN style="color: rgb(128, 0, 128);">25</SPAN> * <SPAN style="color: rgb(128, 0, 128);">16</SPAN> = <SPAN style="color: rgb(128, 0, 128);">4</SPAN><SPAN style="color: rgb(0, 0, 0);">

*/

         ldr    r1, =UART_UBRDIV_VAL   // 0x35
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, #UBRDIV_OFFSET]
         ldr    r1, =UART_UDIVSLOT_VAL  // 0x4
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN><SPAN style="color: rgb(0, 0, 0);">    r1, [r0, #UDIVSLOT_OFFSET]

// UTXH_OFFSET是输出缓冲区，这里是向uart0上打印 ‘O’

         ldr    r1, =0x4f4f4f4f
         </SPAN><SPAN style="color: rgb(0, 0, 255);">str</SPAN>    r1, [r0, #UTXH_OFFSET]            @<SPAN style="color: rgb(128, 0, 0);">‘</SPAN><SPAN style="color: rgb(128, 0, 0);">O</SPAN><SPAN style="color: rgb(128, 0, 0);">‘</SPAN>
         <SPAN style="color: rgb(0, 0, 255);">mov</SPAN> pc, lr</PRE></DIV>
<P>&nbsp;</P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">上面完成了串口底层的初始化，接下来就可以使用了。下面以printf为例分析</SPAN></P>
<H1><SPAN 
style="font-family: courier new,courier; font-size: 18px;">u-boot中printf的实现</SPAN></H1>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">下面是u-boot中printf的源码</SPAN></P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><STRONG>common/console.c</STRONG><STRONG>：</STRONG></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">int</SPAN> printf(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> *<SPAN style="color: rgb(0, 0, 0);">fmt, ...)
{
         va_list args;
         </SPAN><SPAN style="color: rgb(0, 0, 255);">uint</SPAN><SPAN style="color: rgb(0, 0, 0);"> i;
         </SPAN><SPAN style="color: rgb(0, 0, 255);">char</SPAN> printbuffer[CONFIG_SYS_PBSIZE]; <SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> CONFIG_SYS_PBSIZE的值是256</SPAN>
<SPAN style="color: rgb(0, 0, 0);">         va_start(args, fmt);
         </SPAN><SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);"> For this to work, printbuffer must be larger than
          * anything we ever want to print.
          </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN><SPAN style="color: rgb(0, 0, 0);">

         i </SPAN>= vsprintf(printbuffer, fmt, args); <SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> 将要打印的内容写到printbuffer中</SPAN>
<SPAN style="color: rgb(0, 0, 0);">         va_end(args);
         </SPAN><SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);"> Print the string </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN><SPAN style="color: rgb(0, 0, 0);">
         puts(printbuffer);  </SPAN><SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> 将printbuffer中的内容从串口输出</SPAN>
         <SPAN style="color: rgb(0, 0, 255);">return</SPAN><SPAN style="color: rgb(0, 0, 0);"> i;
}

</SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> puts(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> *<SPAN style="color: rgb(0, 0, 0);">s)
{
       </SPAN><SPAN style="color: rgb(0, 0, 255);">if</SPAN> (gd-&gt;flags &amp;<SPAN style="color: rgb(0, 0, 0);"> GD_FLG_DEVINIT) {
                </SPAN><SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);"> Send to the standard output </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN><SPAN style="color: rgb(0, 0, 0);">
                fputs(stdout, s);
       } </SPAN><SPAN style="color: rgb(0, 0, 255);">else</SPAN><SPAN style="color: rgb(0, 0, 0);"> {
                </SPAN><SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);"> Send directly to the handler </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN><SPAN style="color: rgb(0, 0, 0);">
                serial_puts(s);
       }
}</SPAN></PRE></DIV>
<P>&nbsp;</P>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><STRONG>common/serial.c</STRONG><STRONG>：</STRONG></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">void</SPAN> serial_puts (<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> *<SPAN style="color: rgb(0, 0, 0);">s)
{
         </SPAN><SPAN style="color: rgb(0, 0, 255);">if</SPAN> (!(gd-&gt;flags &amp; GD_FLG_RELOC) || !<SPAN style="color: rgb(0, 0, 0);">serial_current) {
                   </SPAN><SPAN style="color: rgb(0, 0, 255);">struct</SPAN> serial_device *dev =<SPAN style="color: rgb(0, 0, 0);"> default_serial_console ();
                   dev</SPAN>-&gt;<SPAN style="color: rgb(0, 0, 0);">puts (s);
                   </SPAN><SPAN style="color: rgb(0, 0, 255);">return</SPAN><SPAN style="color: rgb(0, 0, 0);">;
         }
         serial_current</SPAN>-&gt;<SPAN style="color: rgb(0, 0, 0);">puts (s);
}</SPAN></PRE></DIV>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>struct 
serial_device *default_serial_console(void) __attribute__((weak, 
alias("<STRONG>__default_serial_console</STRONG>")));</EM></SPAN></P>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>上面的意思是如果没有定义default_serial_console</EM><EM>，那么就使用__default_serial_console</EM></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">struct</SPAN> serial_device *__default_serial_console (<SPAN style="color: rgb(0, 0, 255);">void</SPAN><SPAN style="color: rgb(0, 0, 0);">)
{
……
</SPAN><SPAN style="color: rgb(0, 0, 255);">#if</SPAN> defined(<STRONG>CONFIG_SERIAL0</STRONG>)
         <SPAN style="color: rgb(0, 0, 255);">return</SPAN> &amp;<SPAN style="color: rgb(0, 0, 0);"><STRONG>s5p_serial0_device</STRONG>;
</SPAN><SPAN style="color: rgb(0, 0, 255);">#elif</SPAN> defined(CONFIG_SERIAL1)
         <SPAN style="color: rgb(0, 0, 255);">return</SPAN> &amp;<SPAN style="color: rgb(0, 0, 0);">s5p_serial1_device;
</SPAN><SPAN style="color: rgb(0, 0, 255);">#elif</SPAN> defined(CONFIG_SERIAL2)
         <SPAN style="color: rgb(0, 0, 255);">return</SPAN> &amp;<SPAN style="color: rgb(0, 0, 0);">s5p_serial2_device;
</SPAN><SPAN style="color: rgb(0, 0, 255);">#elif</SPAN> defined(CONFIG_SERIAL3)
         <SPAN style="color: rgb(0, 0, 255);">return</SPAN> &amp;<SPAN style="color: rgb(0, 0, 0);">s5p_serial3_device;
</SPAN><SPAN style="color: rgb(0, 0, 255);">#else</SPAN>
<SPAN style="color: rgb(0, 0, 255);">#error</SPAN> "CONFIG_SERIAL? missing."
<SPAN style="color: rgb(0, 0, 255);">#endif</SPAN><SPAN style="color: rgb(0, 0, 0);">
……
}</SPAN></PRE></DIV>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>由于我们使用的是uart0</EM><EM>作为调试串口，并且定义了宏CONFIG_SERIAL0</EM><EM>，所以__default_serial_console</EM><EM>的返回值就是s5p_serial0_device</EM><EM>的地址，下面我们看一下s5p_serial0_device</EM></SPAN></P>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><STRONG>drivers/serial/serial_s5p.c</STRONG><STRONG>：</STRONG></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">#define</SPAN> DECLARE_S5P_SERIAL_FUNCTIONS(port) 
<SPAN style="color: rgb(0, 0, 255);">int</SPAN> s5p_serial##port##_init(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { <SPAN style="color: rgb(0, 0, 255);">return</SPAN><SPAN style="color: rgb(0, 0, 0);"> serial_init_dev(port); } </SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> s5p_serial##port##_setbrg(<SPAN style="color: rgb(0, 0, 255);">void</SPAN><SPAN style="color: rgb(0, 0, 0);">) { serial_setbrg_dev(port); } </SPAN><SPAN style="color: rgb(0, 0, 255);">int</SPAN> s5p_serial##port##_getc(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { <SPAN style="color: rgb(0, 0, 255);">return</SPAN><SPAN style="color: rgb(0, 0, 0);"> serial_getc_dev(port); } </SPAN><SPAN style="color: rgb(0, 0, 255);">int</SPAN> s5p_serial##port##_tstc(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { <SPAN style="color: rgb(0, 0, 255);">return</SPAN><SPAN style="color: rgb(0, 0, 0);"> serial_tstc_dev(port); } </SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> s5p_serial##port##_putc(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN><SPAN style="color: rgb(0, 0, 0);"> c) { serial_putc_dev(c, port); } </SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> s5p_serial##port##_puts(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> *<SPAN style="color: rgb(0, 0, 0);">s) { serial_puts_dev(s, port); }

</SPAN><SPAN style="color: rgb(0, 0, 255);">#define</SPAN> INIT_S5P_SERIAL_STRUCTURE(port, name, bus) { \<SPAN style="color: rgb(0, 0, 0);">
         name,          bus,          s5p_serial##port##_init,          NULL,          s5p_serial##port##_setbrg,          s5p_serial##port##_getc,          s5p_serial##port##_tstc,          s5p_serial##port##_putc,          s5p_serial##port##_puts, }

DECLARE_S5P_SERIAL_FUNCTIONS(</SPAN><SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">);

</SPAN><SPAN style="color: rgb(0, 0, 255);">struct</SPAN> serial_device s5p_serial0_device =<SPAN style="color: rgb(0, 0, 0);">
         INIT_S5P_SERIAL_STRUCTURE(</SPAN><SPAN style="color: rgb(128, 0, 128);">0</SPAN>, <SPAN style="color: rgb(128, 0, 0);">"</SPAN><SPAN style="color: rgb(128, 0, 0);">s5pser0</SPAN><SPAN style="color: rgb(128, 0, 0);">"</SPAN>, <SPAN style="color: rgb(128, 0, 0);">"</SPAN><SPAN style="color: rgb(128, 0, 0);">S5PUART0</SPAN><SPAN style="color: rgb(128, 0, 0);">"</SPAN>);</PRE></DIV>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>综上，这里s5p_serial0_device</EM><EM>的定义如下：</EM></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">int</SPAN> s5p_serial0_init(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { <SPAN style="color: rgb(0, 0, 255);">return</SPAN> serial_init_dev(<SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">); }
</SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> s5p_serial0_setbrg(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { serial_setbrg_dev(<SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">); }
</SPAN><SPAN style="color: rgb(0, 0, 255);">int</SPAN> s5p_serial0_getc(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { <SPAN style="color: rgb(0, 0, 255);">return</SPAN> serial_getc_dev(<SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">); }
</SPAN><SPAN style="color: rgb(0, 0, 255);">int</SPAN> s5p_serial0_tstc(<SPAN style="color: rgb(0, 0, 255);">void</SPAN>) { <SPAN style="color: rgb(0, 0, 255);">return</SPAN> serial_tstc_dev(<SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">); }
</SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> s5p_serial0_putc(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> c) { serial_putc_dev(c, <SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">); }
</SPAN><SPAN style="color: rgb(0, 0, 255);">void</SPAN> s5p_serial0_puts(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> *s) { serial_puts_dev(s, <SPAN style="color: rgb(128, 0, 128);">0</SPAN><SPAN style="color: rgb(0, 0, 0);">); }

</SPAN><SPAN style="color: rgb(0, 0, 255);">struct</SPAN> serial_device s5p_serial0_device =<SPAN style="color: rgb(0, 0, 0);">
{
         </SPAN><SPAN style="color: rgb(128, 0, 0);">"</SPAN><SPAN style="color: rgb(128, 0, 0);">s5pser0</SPAN><SPAN style="color: rgb(128, 0, 0);">"</SPAN><SPAN style="color: rgb(0, 0, 0);">,
         </SPAN><SPAN style="color: rgb(128, 0, 0);">"</SPAN><SPAN style="color: rgb(128, 0, 0);">S5PUART0</SPAN><SPAN style="color: rgb(128, 0, 0);">"</SPAN><SPAN style="color: rgb(0, 0, 0);">,
         s5p_serial0_init,
         NULL,
         s5p_serial0_setbrg,
         s5p_serial0_getc,
         s5p_serial0_tstc,
         s5p_serial0_putc,
         s5p_serial0_puts,
};</SPAN></PRE></DIV>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>然后我们看一下它的puts</EM><EM>函数指针：s5p_serial0_puts</EM></SPAN></P>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>void 
s5p_serial0_puts(const char *s) {<STRONG> serial_puts_dev</STRONG>(s, 0); 
}</EM></SPAN></P>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>然后分析serial_puts_dev(s, 
0)</EM></SPAN></P>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><STRONG>drivers/serial/serial_s5p.c:</STRONG></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">void</SPAN> serial_puts_dev(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> *s, <SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">int</SPAN><SPAN style="color: rgb(0, 0, 0);"> dev_index)
{
         </SPAN><SPAN style="color: rgb(0, 0, 255);">while</SPAN> (*<SPAN style="color: rgb(0, 0, 0);">s)
                   serial_putc_dev(</SPAN>*s++<SPAN style="color: rgb(0, 0, 0);">, dev_index);
}

</SPAN><SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);">
 * Output a single byte to the serial port.
 </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN>

<SPAN style="color: rgb(0, 0, 255);">void</SPAN> serial_putc_dev(<SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">char</SPAN> c, <SPAN style="color: rgb(0, 0, 255);">const</SPAN> <SPAN style="color: rgb(0, 0, 255);">int</SPAN><SPAN style="color: rgb(0, 0, 0);"> dev_index)
{
</SPAN><SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> 获得uart0的控制器基地址</SPAN>
         <SPAN style="color: rgb(0, 0, 255);">struct</SPAN> s5p_uart *<SPAN style="color: rgb(0, 0, 255);">const</SPAN> uart =<SPAN style="color: rgb(0, 0, 0);"> s5p_get_base_uart(dev_index);
</SPAN><SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> 读取发送状态寄存器，看是否有空余空间</SPAN>
         <SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);"> wait for room in the tx FIFO </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN>
         <SPAN style="color: rgb(0, 0, 255);">while</SPAN> (!(readl(&amp;uart-&gt;utrstat) &amp; <SPAN style="color: rgb(128, 0, 128);">0x2</SPAN><SPAN style="color: rgb(0, 0, 0);">)) {
                   </SPAN><SPAN style="color: rgb(0, 0, 255);">if</SPAN> (serial_err_check(dev_index, <SPAN style="color: rgb(128, 0, 128);">1</SPAN><SPAN style="color: rgb(0, 0, 0);">))
                            </SPAN><SPAN style="color: rgb(0, 0, 255);">return</SPAN><SPAN style="color: rgb(0, 0, 0);">;
         }

</SPAN><SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> 将c中存放的字符写到发送缓冲区</SPAN><SPAN style="color: rgb(0, 0, 0);">
         writeb(c, </SPAN>&amp;uart-&gt;<SPAN style="color: rgb(0, 0, 0);">utxh);
         </SPAN><SPAN style="color: rgb(0, 128, 0);">/*</SPAN><SPAN style="color: rgb(0, 128, 0);"> If \n, also do \r </SPAN><SPAN style="color: rgb(0, 128, 0);">*/</SPAN>
         <SPAN style="color: rgb(0, 0, 255);">if</SPAN> (c == <SPAN style="color: rgb(128, 0, 0);">‘</SPAN><SPAN style="color: rgb(128, 0, 0);">\n</SPAN><SPAN style="color: rgb(128, 0, 0);">‘</SPAN><SPAN style="color: rgb(0, 0, 0);">)
                   serial_putc(</SPAN><SPAN style="color: rgb(128, 0, 0);">‘</SPAN><SPAN style="color: rgb(128, 0, 0);">\r</SPAN><SPAN style="color: rgb(128, 0, 0);">‘</SPAN><SPAN style="color: rgb(0, 0, 0);">);
}</SPAN></PRE></DIV>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><EM>下面是<STRONG>s5p_get_base_uart</STRONG></EM><EM>的实现 
</EM></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">static</SPAN> inline <SPAN style="color: rgb(0, 0, 255);">struct</SPAN> s5p_uart *s5p_get_base_uart(<SPAN style="color: rgb(0, 0, 255);">int</SPAN><SPAN style="color: rgb(0, 0, 0);"> dev_index)
{
         u32 offset </SPAN>= dev_index * <SPAN style="color: rgb(0, 0, 255);">sizeof</SPAN>(<SPAN style="color: rgb(0, 0, 255);">struct</SPAN><SPAN style="color: rgb(0, 0, 0);"> s5p_uart);
         </SPAN><SPAN style="color: rgb(0, 0, 255);">return</SPAN> (<SPAN style="color: rgb(0, 0, 255);">struct</SPAN> s5p_uart *)samsung_get_base_uart(); <SPAN style="color: rgb(0, 128, 0);">//</SPAN><SPAN style="color: rgb(0, 128, 0);"> 获得uart0控制器的基地址</SPAN><SPAN style="color: rgb(0, 0, 0);">
}</SPAN></PRE></DIV>
<P align="left"><SPAN 
style="font-family: courier new,courier; font-size: 18px;"><STRONG>include/asm/arch-exynos/cpu.h</STRONG><STRONG>：</STRONG></SPAN></P>
<DIV class="cnblogs_code">
<PRE><SPAN style="color: rgb(0, 0, 255);">#define</SPAN> SAMSUNG_BASE(device, base)                              <SPAN style="color: rgb(0, 0, 255);">static</SPAN> inline unsigned <SPAN style="color: rgb(0, 0, 255);">int</SPAN> samsung_get_base_##device(<SPAN style="color: rgb(0, 0, 255);">void</SPAN><SPAN style="color: rgb(0, 0, 0);">) {                                                                                            </SPAN><SPAN style="color: rgb(0, 0, 255);">return</SPAN> S5PV310_##<SPAN style="color: rgb(0, 0, 255);">base</SPAN><SPAN style="color: rgb(0, 0, 0);">;                                      }<BR>
SAMSUNG_BASE(uart, UART_CONSOLE_BASE)
</SPAN><SPAN style="color: rgb(0, 0, 255);">#define</SPAN> S5PV310_UART_CONSOLE_BASE (S5PV310_UART_BASE + S5PV310_UART0_OFFSET)</PRE></DIV>
<P><SPAN 
style="font-family: courier new,courier; font-size: 18px;">同理可以分析其他使用向串口读取或者写入数据的函数</SPAN></P>
<P><A title="tiny4412 串口驱动分析 --- u-boot中的串口驱动,bubuko.com" style="color: rgb(255, 255, 255);" 
href="http://www.bubuko.com/infodetail-661032.html">tiny4412 串口驱动分析 --- 
u-boot中的串口驱动</A></P>
<P>标签：<A title="android" 
href="http://www.bubuko.com/so/1/android">android</A>&nbsp;&nbsp;&nbsp;<A title="class" 
href="http://www.bubuko.com/so/1/class">class</A>&nbsp;&nbsp;&nbsp;<A title="style" 
href="http://www.bubuko.com/so/1/style">style</A>&nbsp;&nbsp;&nbsp;<A title="代码" 
href="http://www.bubuko.com/so/1/%e4%bb%a3%e7%a0%81">代码</A>&nbsp;&nbsp;&nbsp;<A 
title="com" href="http://www.bubuko.com/so/1/com">com</A>&nbsp;&nbsp;&nbsp;<A 
title="log" href="http://www.bubuko.com/so/1/log">log</A>&nbsp;&nbsp;&nbsp;<A 
title="使用" 
href="http://www.bubuko.com/so/1/%e4%bd%bf%e7%94%a8">使用</A>&nbsp;&nbsp;&nbsp;<A 
title="src" href="http://www.bubuko.com/so/1/src">src</A>&nbsp;&nbsp;&nbsp;<A 
title="http" 
href="http://www.bubuko.com/so/1/http">http</A>&nbsp;&nbsp;&nbsp;</P>
<P>原文：http://www.cnblogs.com/pengdonglin137/p/4320879.html</P></SPAN>            
     </DIV>
<DIV id="divcomment">
<DIV>
<DIV class=" divtextaligncenter">
<DIV class="detailcai" id="infono">
<DIV class="detailcai1 colorboldlv">踩</DIV>
<DIV class="detailcai2 colorboldlv">(<SPAN id="spanNo">0</SPAN>)</DIV></DIV>
<DIV class="detailzan" id="infoyes">
<DIV class="detailzan1 colorboldCheng">赞</DIV>
<DIV class="detailzan2 colorboldCheng">(<SPAN id="spanYes">0</SPAN>)</DIV></DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV class="divtextalignright margintop10">
<DIV class="width100bi paddingleft10right10"><SPAN class="colorboldCheng" id="spanYesContent"></SPAN>&nbsp; 
<SPAN class="colorboldlv" id="spanNoContent"></SPAN>&nbsp; <SPAN class="colorboldCheng" 
id="spanBadContent"></SPAN>                             </DIV></DIV></DIV>
<DIV class="divtextalignright margintop10"><SPAN class="detailjubao" id="infobad">举报</SPAN> 
                    </DIV>
<DIV class="margintop20">
<DIV class="divfloatleft">
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/f.txt" async=""></SCRIPT>
         <!-- bubuko-infodetail-336x280-1 -->         <INS class="adsbygoogle" 
style="width: 336px; height: 280px; display: inline-block;" data-ad-slot="8276669881" 
data-ad-client="ca-pub-8616102841876629"></INS>         
<SCRIPT>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </SCRIPT>
     </DIV>
<DIV class="divfloatright">
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/f.txt" async=""></SCRIPT>
         <!-- bubuko-infodetail-336x280-2 -->         <INS class="adsbygoogle" 
style="width: 336px; height: 280px; display: inline-block;" data-ad-slot="9753403083" 
data-ad-client="ca-pub-8616102841876629"></INS>         
<SCRIPT>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </SCRIPT>
     </DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV class="divtextalignleft margintop20" id="comment">
<DIV class="detailpinglun1"><SPAN class="detailpinglun2 title6">评论</SPAN><SPAN 
class="detailpinglun3">一句话评论（<SPAN class="colorboldCheng" 
id="commentCount">0</SPAN>）</SPAN></DIV>
<DIV class="paddingtop20">
<DIV class="divtextaligncenter margintop20" id="commentlistend" name="commentlistend"><SPAN 
id="lblpage">共<SPAN class="pagecolorc">0</SPAN>条&nbsp;&nbsp;</SPAN>              
               </DIV></DIV>
<DIV class="margintop20">
<FORM action="/ajaxjs/info_detail_commentadd.aspx" method="post">
<DIV class="divtextalignleft paddingtop20">
<DIV class="divbackgroundcolor1" id="commenthf"></DIV>
<DIV><TEXTAREA name="tbcommentcontent" class="tb" id="tbcommentcontent" style="width: 680px; height: 120px;"></TEXTAREA> 
                                </DIV></DIV>
<DIV class="divtextalignright paddingtop10 "><SPAN class="colorboldCheng" id="addCommentTishi">登录后才能评论！</SPAN> 
                                <SPAN id="loginno"><INPUT class="mbtn1" onclick="location.href='http://member.bubuko.com/login.aspx?returnUrl=http://www.bubuko.com/infodetail.aspx?id=661032';" type="button" value="登录"></SPAN> 
                            </DIV></FORM></DIV></DIV></DIV></DIV></DIV>
<DIV class="width30bi divfloatright">
<DIV class="paddingbottom20">
<SCRIPT type="text/javascript">        document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E%3Cscript charset="utf-8" src="http://znsv.baidu.com/customer_search/api/js?sid=10743263978424259100') + '&plate_url=' + (encodeURIComponent(window.location.href)) + '&t=' + (Math.ceil(new Date() / 3600000)) + unescape('"%3E%3C/script%3E'));</SCRIPT>
 </DIV>
<DIV class="paddingbottom20">
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/f.txt" async=""></SCRIPT>
     <!-- bubuko-right-300x600 -->     <INS class="adsbygoogle" style="width: 300px; height: 600px; display: inline-block;" 
data-ad-slot="1530302281" data-ad-client="ca-pub-8616102841876629"></INS>     
<SCRIPT>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </SCRIPT>
 </DIV>
<DIV class="width100bi divborder">
<DIV class="divtitle">
<DIV class="divfloatleft divtitlefont" id="infofile1_div1">分享档案</DIV>
<DIV class="divfloatright"><A title="分享档案更多" class="colorCheng" href="http://www.bubuko.com/infotimemore.html">更多&gt;</A> 
        </DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV class="divtextalignleft paddingleft10right10 margintop10bottom10 heightline30px"><A 
title="2016年05月16日技术分享文章" class="taga" href="http://www.bubuko.com/infotime-20160516-1.html">2016年05月16日 
                    (980)</A><BR><A title="2016年05月15日技术分享文章" class="taga" href="http://www.bubuko.com/infotime-20160515-1.html"> 
                   2016年05月15日                     (1684)</A><BR><A title="2016年05月14日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160514-1.html">              
      2016年05月14日                     (1476)</A><BR><A title="2016年05月13日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160513-1.html">              
      2016年05月13日                     (4937)</A><BR><A title="2016年05月12日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160512-1.html">              
      2016年05月12日                     (4729)</A><BR><A title="2016年05月11日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160511-1.html">              
      2016年05月11日                     (2239)</A><BR><A title="2016年05月10日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160510-1.html">              
      2016年05月10日                     (2034)</A><BR><A title="2016年05月09日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160509-1.html">              
      2016年05月09日                     (1644)</A><BR><A title="2016年05月08日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160508-1.html">              
      2016年05月08日                     (1375)</A><BR><A title="2016年05月07日技术分享文章" 
class="taga" href="http://www.bubuko.com/infotime-20160507-1.html">              
      2016年05月07日                     (2995)</A><BR></DIV></DIV>
<DIV class="width100bi margintop20 divborder">
<DIV class="divtitle">
<DIV class="divfloatleft divtitlefont" id="infotop2_divtitle">文章周排行</DIV>
<DIV class="divfloatright"><A title="文章周排行更多>" class="colorCheng" id="infotop2_amore" 
href="http://www.bubuko.com/infotoplist-11-2-1.html">更多&gt;</A></DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV>
<UL>
  <LI class="divullititle heightline25px divtextalignleft"><A title="利用Wireshark截取数据包，并对数据包进行解析" 
  href="http://www.bubuko.com/infodetail-173739.html" 
  _self="">利用Wireshark截取数据包，并对数据包进行解析                         &nbsp;<SPAN class="colorlv">2014-05-10</SPAN> 
  </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="汉字-拼音转换类" 
  href="http://www.bubuko.com/infodetail-208453.html" _self="">汉字-拼音转换类          
                 &nbsp;<SPAN class="colorlv">2014-06-11</SPAN> </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="史上最详细的CocoaPods安装教程" 
  href="http://www.bubuko.com/infodetail-425274.html" 
  _self="">史上最详细的CocoaPods安装教程                         &nbsp;<SPAN class="colorlv">2014-10-23</SPAN> 
  </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="solr的schema官方介绍" 
  href="http://www.bubuko.com/infodetail-427762.html" _self="">                  
        solr的schema官方介绍                         &nbsp;<SPAN 
  class="colorlv">2014-10-24</SPAN> </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="MyBatis架构设计及源代码分析系列(一):MyBatis架构" 
  href="http://www.bubuko.com/infodetail-549184.html" _self="">                  
        MyBatis架构设计及源代码分析系列(一):MyBatis架构                         &nbsp;<SPAN 
  class="colorlv">2014-12-28</SPAN> </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="zepto的tap事件的点透问题的几种解决方案" 
  href="http://www.bubuko.com/infodetail-649496.html" _self="">                  
        zepto的tap事件的点透问题的几种解决方案                         &nbsp;<SPAN class="colorlv">2015-03-02</SPAN> 
  </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="Androd Toolbar 的简单使用（转）" 
  href="http://www.bubuko.com/infodetail-652481.html" _self="">                  
        Androd Toolbar 的简单使用（转）                         &nbsp;<SPAN class="colorlv">2015-03-03</SPAN> 
  </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="HC-05 蓝牙模块的调试与使用" 
  href="http://www.bubuko.com/infodetail-653603.html" _self="">                  
        HC-05 蓝牙模块的调试与使用                         &nbsp;<SPAN 
  class="colorlv">2015-03-04</SPAN> </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="Bootstarp学习（二十三）模态弹出框（Modals）" 
  href="http://www.bubuko.com/infodetail-653787.html" _self="">                  
        Bootstarp学习（二十三）模态弹出框（Modals）                         &nbsp;<SPAN class="colorlv">2015-03-04</SPAN> 
  </A></LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="Robotium自动化测试框架实用教程（图）" 
  href="http://www.bubuko.com/infodetail-674900.html" _self="">                  
        Robotium自动化测试框架实用教程（图）                         &nbsp;<SPAN class="colorlv">2015-03-14</SPAN> 
  </A></LI></UL></DIV></DIV>
<DIV class="width100bi divborder margintop20">
<DIV class="divtitle">
<DIV class="divfloatleft divtitlefont" id="newsnew1_divtitle">最新新闻</DIV>
<DIV class="divfloatright"><A title="最新新闻更多>" class="colorCheng" id="newsnew1_amore" 
href="http://www.bubuko.com/news/">更多</A></DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV>
<UL>
  <LI class="divullititle heightline25px divtextalignleft"><A title="据科技网站CNET报道，Amazon@Penn可能与你去过的任何店面都不相同，这个明亮的空间中没有货架、没有库存、也没有收款台。实际上，它是否能&#10;被称为店面都值得商榷。然而，这个占地300多平方米的空间，正是亚马逊在美国宾夕法尼亚大学新开的实体书，它成为亚马逊进化的又一例证。亚马逊已经是世&#10;界上最大的电子商务公司，它正开始建立更多实体店，以便接近和吸引数以百万计的用户。" 
  href="http://www.bubuko.com/news/detail-82692.html" _self="">                  
        亚马逊在宾州大学开实体店 里面却没有书                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="据英国《每日邮报》5月13日报道，近日，一组拳王迈克?泰森1995年在拉斯维加斯比赛的照片在网上疯传，照片中，前排一位观众用酷似今天智能手机的设站在拍摄比赛。有人玩笑猜测，手机的持有者不是时间旅行者，就是来地球度假的外星人。1995年的这场比赛是泰森出狱首赛，对手彼得?麦克内利(Peter McNeeley)第一回合就宣布退出，让这场比赛成为泰森职业生涯中最火爆的比赛之一。" 
  href="http://www.bubuko.com/news/detail-82691.html" 
  _self="">拳王泰森95年比赛视频惊现智能手机引热议                         &nbsp;<SPAN class="colorlv">2016-05-16</SPAN></A> 
                      </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="5月16日消息，据华尔街日报中文网官方微博，知情人士称，腾讯正把计划中的20亿美元银行贷款规模扩大至30亿-40亿美元。上月中旬，外媒援引知情人士消息称，腾讯正在就20亿美元贷款与银行展开谈判。腾讯正寻求筹集资金用于更多收购、以及在金融服务等新领域扩张。" 
  href="http://www.bubuko.com/news/detail-82690.html" _self="">腾讯拟扩大贷款规模最高至40亿美元 
  用于收购扩张                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="日前，4名专车司机因恶意刷单、涉嫌诈骗罪被提起公诉，分别被判处8个月至1年有期徒刑，并各自缴纳罚金1000元。据悉，2015年9月，这几名专车司机（王某、董某等）因恶意刷单、非法套取补贴获利，被上海市公安局普陀分局刑事拘留。此前，北京海淀检方也对利用“滴滴打车”进行刷单套现诈骗的常某提起公诉，按刑法有关诈骗罪的规定，常某被判处有期徒刑8个月，并处四千元罚金，全部非法所得发还被害单位北京嘀嘀无限科技发展有限公司。" 
  href="http://www.bubuko.com/news/detail-82689.html" _self="">滴滴专车司机刷单被判诈骗罪 
  最高获刑1年                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="据英国《每日邮报》5月13日报道，近日，科学家利用哈勃望远镜，观测到了距地球6600万光年的NGC6814螺旋星系。科学家怀疑NGC6814螺旋星系存在着巨大黑洞，质量约为太阳黑洞的1800万倍。在所有不规则星系中，螺旋星系占到总数的50%以上，且每一个星系都不尽相同。" 
  href="http://www.bubuko.com/news/detail-82688.html" _self="">科学家观测到遥远螺旋星系 
  内藏巨大黑洞                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="就像看电影大片一样。你可能很难想象：距离中国广州市区40多公里的钟落潭镇，一间略显破旧的厂房内，两条生产线正在运转。在这里生产的“LV”产品，很&#10;快就会出现在几千公里之外、奢华的迪拜。 &#10;几个由造假老手组成的团伙，在广州隐秘地布置生产线，在迪拜悄悄地安排仓储和销售窝点，创造着数以亿计的“产值”。正是这样的团伙，让假冒品牌在线上线下&#10;泛滥成灾。" 
  href="http://www.bubuko.com/news/detail-82687.html" _self="">阿里联手LV跨国打假 
  迪拜查获6万余件假货                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="库克又来中国了，这是苹果CEO任期内的第八次访问中国。就在他来的前几天，滴滴宣布获得苹果10亿美元的投资，在今天的活动上陪同库克做主持的也是滴滴&#10;总裁柳青。在王府井的苹果零售店中，库克与中国的部分开发者进行了交流，开发者希望苹果能够在App &#10;Store中增加评论的互动功能，让开发者可以直接和用户进行互动交流。除了今天的活动外，库克此行的重头戏是继续与中国的宣传部门和广电总局等机构进行&#10;沟通。" 
  href="http://www.bubuko.com/news/detail-82686.html" 
  _self="">库克再次访华的背后：iPhone销量下滑 投资人清仓                         &nbsp;<SPAN class="colorlv">2016-05-16</SPAN></A> 
                      </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="距离Moto G4和G4 Plus的发布已经没剩几天，近日又有两款未知型号的摩托罗拉设备通过了FCC的认证，因而第4代Moto G应该还将很快上市。鉴于厂商已经发布了将于5月17号召开发布会的预告，大家普遍猜测这两款设备就是Moto G4和G4 Plus。FCC网站上公布的设备代号分别为XT1622和XT1642，作为参考，美版第三代Moto G的代号为XT1540。" 
  href="http://www.bubuko.com/news/detail-82685.html" _self="">                  
        Moto G4和G4 Plus或已通过FCC认证：5月17号见分晓                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="又到一年5.17，电信日里会有很多的业务促销活动，三家电信运营商也适应社会形势推出了继续提速降费方案，还有更多的电商企业将这一天变成了新的购物节。只是，对于一百多万通信运营商来讲，可能不能带来哪怕一点点高兴。公司继续的提速降费，可能意味着公司的收入与利润继续被挤压，而这些经营硬指标的下降很可能带来员工收入的进一步降低。" 
  href="http://www.bubuko.com/news/detail-82684.html" _self="">                  
        [评论]这么点可怜的收入 运营商还想留住谁？                         &nbsp;<SPAN class="colorlv">2016-05-16</SPAN></A> 
                      </LI>
  <LI class="divullititle heightline25px divtextalignleft"><A title="今年5月13日上午，从主城开车回老家万州的男子曾岫，行至渝北两路时遇到一桩魂飞魄散的事，他开车不看路标迷恋导航，结果开上一条断头路，险些坠下20多米高的悬崖。20多岁的男子曾岫是万州人，现住渝北黄泥塝某小区。13日早上7：30左右，他从黄泥塝家里出发准备回万州老家办事，因担心路上堵车，他便开启手机导航，选定一条“避开拥堵”的路线。" 
  href="http://www.bubuko.com/news/detail-82683.html" _self="">开车不看路标迷恋导航 
  男子开上断头路险坠崖                         &nbsp;<SPAN 
  class="colorlv">2016-05-16</SPAN></A>                     </LI></UL></DIV></DIV>
<DIV class="width300px" id="xuanting">
<DIV class="margintop10">
<SCRIPT type="text/javascript">
            var cpro_id = "u2437949";
            (window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id] = { at: "3", rsi0: "300", rsi1: "300", pat: "17", tn: "baiduCustNativeAD", rss1: "#FFFFFF", conBW: "1", adp: "1", ptt: "0", titFF: "%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91", titFS: "14", rss2: "#000000", titSU: "0" }
        </SCRIPT>
         
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/c.js" type="text/javascript"></SCRIPT>
         
<SCRIPT>
            var baiduImagePlus = {
                noLogo: true,
                unionId: 'u2416327',
                formList: [{ formId: 2}]
            };
        </SCRIPT>
         
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/i.js"></SCRIPT>
     </DIV>
<DIV class="margintop10">
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/f.txt" async=""></SCRIPT>
         <!-- bubuko-infodetail-right-zidingyixuanting-300x250 -->         <INS 
class="adsbygoogle" style="width: 300px; height: 250px; display: inline-block;" 
data-ad-slot="1268864286" data-ad-client="ca-pub-8616102841876629"></INS>        
 
<SCRIPT>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </SCRIPT>
     </DIV></DIV></DIV>
<DIV class="divfloatclear"></DIV></DIV>
<DIV class="width1000px divmargin0auto paddingtop20bottom20">
<DIV class="width1000px divborder margintop20">
<DIV class="youqingtitle"><A title="友情链接">友情链接</A>         </DIV>
<DIV class="youqingcontent"><A title="互联网产品定制开发专家" href="http://www.lightinit.com/" 
target="_blank">兰亭集智</A>&nbsp;&nbsp;<A href="http://www.guozhihua.net/" target="_blank">国之画</A>&nbsp;&nbsp;<A 
href="http://www.cnbeta.com/" target="_blank">cnbeta</A>&nbsp;&nbsp; <A href="http://www.csdn.net/" 
target="_blank">                        CSDN</A>&nbsp;&nbsp;<A href="http://www.cnblogs.com/" 
target="_blank">博客园             </A>&nbsp;&nbsp;<A href="http://tongji.baidu.com/" 
target="_blank">百度统计</A>&nbsp;&nbsp;            <A href="http://www.cnzz.com/" 
target="_blank">站长统计</A>&nbsp;&nbsp;            <BR><A href="http://www.mobile-open.com/" 
target="_blank">阳和移动开发</A>&nbsp;&nbsp; <A title="汇智网在线编程学习" href="http://www.hubwiz.com/" 
target="_blank">汇智网 </A>&nbsp;&nbsp;<A title="易捷博客网" href="http://www.ycyjkj.com/" 
target="_blank">易捷博客网 </A>&nbsp;&nbsp;<A title="布布分享" href="http://www.bubufx.com/" 
target="_blank">布布分享 </A>&nbsp;&nbsp;<A title="天码营" href="http://tianmaying.com/" 
target="_blank">天码营 </A>&nbsp;&nbsp;<A title="HarriesBlog" href="http://www.liuhaihua.cn/" 
target="_blank">HarriesBlog </A>&nbsp;&nbsp;<A title="程序员客栈" href="http://www.proginn.com/" 
target="_blank">程序员客栈 </A>&nbsp;&nbsp;<A title="情怀" href="http://www.cnfeelings.com/" 
target="_blank">情怀 </A>&nbsp;&nbsp;<A title="科学看世界" href="http://91stw.net/" 
target="_blank">科学看世界 </A>&nbsp;&nbsp;<A title="吾吾织梦" href="http://www.55zm.com/" 
target="_blank">吾吾织梦 </A>&nbsp;&nbsp;<A title="专注PHP程序员一站式免费学习站点" href="http://www.5ibc.net/" 
target="_blank">PHP教程 </A>&nbsp;&nbsp;        </DIV></DIV></DIV>
<DIV class="bottomdiv">
<DIV class="width1000px divmargin0auto paddingtop20">
<DIV class="divfloatleft width500px">
<DIV class="height30px"><A title="bubuko.com关于我们" href="http://www.bubuko.com/about.html">关于我们</A> 
- <A title="bubuko.com联系我们" href="http://www.bubuko.com/contactus.html">联系我们</A> 
- <A title="bubuko.com留言反馈" href="http://www.bubuko.com/guest.html">留言反馈</A>     
        </DIV>
<DIV class="height30px">© 2014 <A title="bubuko.com技术分享" href="http://www.bubuko.com/">bubuko.com</A> 
版权所有                鲁ICP备09046678号-4             </DIV>
<DIV><SPAN class="colorlv">打开技术之扣，分享程序人生！</SPAN>             </DIV>
<DIV class="paddingtop20 paddingbottom20">
<SCRIPT type="text/javascript">                    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://"); document.write(unescape("%3Cspan id='cnzz_stat_icon_1258727054'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1258727054%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</SCRIPT>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 
<SCRIPT type="text/javascript">
                    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
                    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fb85be54ed045cab3f2e448f2126e3884' type='text/javascript'%3E%3C/script%3E"));
                </SCRIPT>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <A style="height: 20px; line-height: 20px; text-decoration: none; display: inline-block;" 
href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=37021202000002"><IMG 
style="float: left;" src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/ghs.png" 
border="0">
<P style="margin: 0px 0px 0px 5px; height: 20px; color: rgb(147, 147, 147); line-height: 20px; float: left;"> 
                        鲁公网安备 37021202000002号</P></A>             </DIV></DIV>
<DIV class="divfloatright width500px"></DIV>
<DIV class="divfloatclear"></DIV></DIV></DIV>
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/bubukojs.js" type="text/javascript"></SCRIPT>
 
<SCRIPT type="text/javascript">
    /*bubuko-zuoyouxuanfu--120*300 创建于 2014-10-14*/
    var cpro_id = "u1757709";
</SCRIPT>
 
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/f.js" type="text/javascript"></SCRIPT>
 
<SCRIPT type="text/javascript">
    /*bubuko-infodetail--neiwen--2014-11-30*/
    var cpro_id = "u1836545";
</SCRIPT>
 
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/cnw.js" type="text/javascript"></SCRIPT>
     
<SCRIPT type="text/javascript">        var mid = ''; var id = '661032'; var idm = '120442'; var commentitemcount = '0'; var memberhost = 'http://member.bubuko.com/'; prettyPrint();
    </SCRIPT>
     
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/infodetail.js" type="text/javascript" charset="utf-8"></SCRIPT>
     
<SCRIPT src="tiny4412%20串口驱动分析%20---%20u-boot中的串口驱动-布布扣-bubuko_com_files/member.js" type="text/javascript" charset="utf-8"></SCRIPT>
 
<SCRIPT type="text/javascript">/* <![CDATA[ */(function(d,s,a,i,j,r,l,m,t){try{l=d.getElementsByTagName('a');t=d.createElement('textarea');for(i=0;l.length-i;i++){try{a=l[i].href;s=a.indexOf('/cdn-cgi/l/email-protection');m=a.length;if(a&&s>-1&&m>28){j=28+s;s='';if(j<m){r='0x'+a.substr(j,2)|0;for(j+=2;j<m&&a.charAt(j)!='X';j+=2)s+='%'+('0'+('0x'+a.substr(j,2)^r).toString(16)).slice(-2);j++;s=decodeURIComponent(s)+a.substr(j,m-j)}t.innerHTML=s.replace(/</g,'&lt;').replace(/>/g,'&gt;');l[i].href='mailto:'+t.value}}catch(e){}}}catch(e){}})(document);/* ]]> */</SCRIPT>
 </BODY></HTML>
